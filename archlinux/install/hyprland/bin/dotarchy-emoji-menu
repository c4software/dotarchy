#!/bin/bash

read_emoji_list() {
    local script_dir="$(dirname "$(readlink -f "$0")")"
    local emoji_file="$script_dir/dotarchy-emoji-list.txt"
    
    if [[ ! -f "$emoji_file" ]]; then
        echo "No emoji file found: $emoji_file" >&2
        exit 1
    fi

    grep -v '^$' "$emoji_file"
}

main() {
    local emoji_options
    emoji_options=$(read_emoji_list)
    
    if [[ -z "$emoji_options" ]]; then
        echo "Aucun emoji disponible." >&2
        exit 1
    fi
    
    # Afficher le menu de s√©lection
    local selected
    selected=$(dotarchy-display-menu "Pick an emoji:" "$emoji_options" "" "" 500)
    
    if [[ -n "$selected" ]]; then
        local emoji="${selected%% *}"
        
        echo -n "$emoji" | wl-copy
    fi
}

main "$@"